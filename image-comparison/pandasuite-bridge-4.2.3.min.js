!function(e,n){if("function"==typeof define&&define.amd)define("PandaBridge",["exports"],n);else if("undefined"!=typeof exports)n(exports);else{var i={exports:{}};n(i.exports),e.PandaBridge=i.exports.default}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,(function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){};function i(e,i){n.globalReceive.forEach((function(n){n(e,i||[])})),n.eventReceive[e]&&n.eventReceive[e].forEach((function(e){e(i||[])}))}n.initCallBack=null,n.loadCallBack=null,n.updateCallBack=null,n.globalReceive=[],n.eventReceive={},n.bridge=null,n.isStudio=!1,n.resources=[],n.properties={},n.markers=[],n.isCoreInitialized=!1,n.INITIALIZE="__ps_initialize",n.UPDATE="__ps_update",n.SYNCHRONIZE="synchronize",n.TRIGGER_MARKER="triggerMarker",n.INITIALIZED="__ps_initialized",n.UPDATED="__ps_updated",n.STUDIO="__ps_studio",n.LANGUAGE="__ps_language",n.UNIQUE_ID="__ps_id",n.GET_SNAPSHOT_DATA="__ps_getSnapshotData",n.SET_SNAPSHOT_DATA="__ps_setSnapshotData",n.SNAPSHOT_DATA_RESULT="__ps_snapshotDataResult",n.GET_SCREENSHOT="__ps_getScreenshot",n.SCREENSHOT_RESULT="__ps_screenshotResult",function(e){if(window.WebViewJavascriptBridge)e(window.WebViewJavascriptBridge);else if(window.WebViewAndroidBridge)e({init:function(e){window.sendMessage=function(n){e(n)}},send:function(e){window.WebViewAndroidBridge.send(e)}});else{if(document.addEventListener("WebViewJavascriptBridgeReady",(function(){e(window.WebViewJavascriptBridge)}),!1),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1){if(window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];var i=document.createElement("iframe");i.style.display="none",i.src="https://__bridge_loaded__",document.documentElement.appendChild(i),setTimeout((function(){document.documentElement.removeChild(i)}),0)}window.addEventListener("message",(function(i){"PandaJavascriptBridgeReady"===i.data&&(n.listen(n.STUDIO,(function(){n.isStudio=!0})),n.listen(n.LANGUAGE,(function(e){n.currentLanguage=e&&e.language})),e({init:function(e){window.addEventListener("message",(function(n){"PandaJavascriptBridgeReady"!==n.data&&e(n.data)}),!1)},send:function(e){window!==window.parent&&window.parent.postMessage(e,"*")}}))}),!1)}}((function(e){var t;window.WebViewJavascriptBridge&&e===window.WebViewJavascriptBridge&&void 0===window.WebViewJavascriptBridge.send&&(e={init:(t=e,function(e){t.registerHandler("message",(function(n){e(n)}))}),send:function(e){return function(n){e.callHandler("message",n)}}(e)}),n.bridge=e,n.initCallBack&&n.initCallBack(),e.init((function(e){try{var n=JSON.parse(e);i(n.event,n.args)}catch(e){}}))})),n.init=function(e){n.initCallBack=e,n.bridge&&n.initCallBack()},n.send=function(e,i){if(n.bridge)try{var t=JSON.stringify({event:e,args:i});n.bridge.send.call(n.bridge,t)}catch(e){}},n.listen=function(e,i){"function"==typeof e?n.globalReceive.push(e):(void 0===n.eventReceive[e]&&(n.eventReceive[e]=[]),n.eventReceive[e].push(i))},n.unlisten=function(e,i){if(void 0===e&&void 0===i)n.globalReceive=[],n.eventReceive={};else if("function"==typeof e){var t=n.globalReceive.indexOf(e);-1!==t&&n.globalReceive.splice(t,1)}else if(void 0===i)n.eventReceive[e]=[];else{var a=n.eventReceive[e].indexOf(i);-1!==a&&n.eventReceive[e].splice(a,1)}},n.listen(n.INITIALIZE,(function(e){n.isCoreInitialized=!0,n.resources=(e=e||[])[2]||[],n.properties=e[0]||{},n.markers=e[1]||[],n.loadCallBack&&(n.loadCallBack({properties:n.properties,markers:n.markers,resources:n.resources}),n.loadCallBack=null)})),n.onLoad=function(e){(n.loadCallBack=e)&&n.isCoreInitialized&&(n.loadCallBack({properties:n.properties,markers:n.markers,resources:n.resources}),n.loadCallBack=null)},n.listen(n.UPDATE,(function(e){n.resources=(e=e||[])[2]||[],n.properties=e[0]||{},n.markers=e[1]||[],n.updateCallBack&&n.updateCallBack({properties:n.properties,markers:n.markers,resources:n.resources})})),n.onUpdate=function(e){n.updateCallBack=e},n.getSnapshotData=function(e){n.listen(n.GET_SNAPSHOT_DATA,(function(i){n.send(n.SNAPSHOT_DATA_RESULT,[e(i)])}))},n.setSnapshotData=function(e){n.listen(n.SET_SNAPSHOT_DATA,(function(n){e({data:(n=n||[])[0]||{},params:n[1]||{}})}))},n.getScreenshot=function(e){n.listen(n.GET_SCREENSHOT,(function(i){e((function(e){n.send(n.SCREENSHOT_RESULT,[e])}),i)}))},n.takeScreenshot=function(){i(n.GET_SCREENSHOT,null)},n.synchronize=function(e,i){"function"==typeof e?n.listen(n.SYNCHRONIZE,(function(n){e(n[0])})):"function"==typeof i&&n.listen(n.SYNCHRONIZE,(function(n){(n||[])[1]===e&&i(n[0])}))},n.resolvePath=function(e,i){var t=n.resources.filter((function(n){return n.id===e&&n.path})),a=t&&t[0];if(a&&n.currentLanguage){var r=t.find((function(e){return e.language===n.currentLanguage}));r&&(a=r)}return a?a.path:i};var t=n;e.default=t,Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if("function"!=typeof e)throw TypeError("predicate must be a function");for(var t=arguments[1],a=0;a<i;){var r=n[a];if(e.call(t,r,a,n))return r;a++}},configurable:!0,writable:!0})}));